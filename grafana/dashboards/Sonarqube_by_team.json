{
  "annotations": {
    "list": [
      {
        "builtIn": 1,
        "datasource": {
          "type": "grafana",
          "uid": "-- Grafana --"
        },
        "enable": true,
        "hide": true,
        "iconColor": "rgba(0, 211, 255, 1)",
        "name": "Annotations & Alerts",
        "type": "dashboard"
      }
    ]
  },
  "editable": true,
  "fiscalYearStartMonth": 0,
  "graphTooltip": 0,
  "id": 213,
  "links": [],
  "panels": [
    {
      "collapsed": false,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 0
      },
      "id": 8,
      "panels": [],
      "title": "Reliability & Security",
      "type": "row"
    },
    {
      "datasource": {
        "type": "mysql",
        "uid": "P430005175C4C7810"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "mappings": [],
          "noValue": "0 Bugs",
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          },
          "unit": "Bugs"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 5,
        "w": 7,
        "x": 0,
        "y": 1
      },
      "id": 1,
      "links": [
        {
          "targetBlank": true,
          "title": "Code Quality Issue Count",
          "url": "https://devlake.apache.org/docs/Metrics/CQIssueCount"
        }
      ],
      "options": {
        "colorMode": "value",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "auto",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "showPercentChange": false,
        "textMode": "auto",
        "wideLayout": true
      },
      "pluginVersion": "10.4.1",
      "targets": [
        {
          "dataset": "devlake_prod",
          "datasource": {
            "type": "mysql",
            "uid": "P430005175C4C7810"
          },
          "editorMode": "code",
          "format": "table",
          "rawQuery": true,
          "rawSql": "-- SELECT row_id from devlake_prod.project_mapping WHERE `table`=\"cq_projects\" and project_name = \"2W\"\n-- select * from devlake_prod.cq_projects;\n  -- SELECT row_id from devlake_prod.project_mapping WHERE `table`=\"cq_projects\" and project_name = \"2W\" \nSELECT COUNT(DISTINCT i.id) AS \"Bugs\"\nFROM devlake_prod.cq_issues i\nJOIN devlake_prod.project_mapping pm ON i.project_key = pm.row_id\nWHERE pm.`table` = \"cq_projects\"\n  AND pm.project_name IN (${project_id})\n  AND i.type = \"BUG\"\n  AND i.severity IN (\"\", \"MAJOR\", \"INFO\", \"CRITICAL\", \"MINOR\", \"BLOCKER\");\n\n-- SELECT count(distinct id) as \"Bugs\"\n--  from devlake_prod.cq_issues IN (\n--   SELECT row_id from devlake_prod.project_mapping WHERE `table`=\"cq_projects\" and project_name = \"2W\" \n-- ) and type = \"BUG\"\n--   and severity in (\"\",\"MAJOR\",\"INFO\",\"CRITICAL\",\"MINOR\",\"BLOCKER\")\n  ",
          "refId": "A",
          "sql": {
            "columns": [
              {
                "parameters": [],
                "type": "function"
              }
            ],
            "groupBy": [
              {
                "property": {
                  "type": "string"
                },
                "type": "groupBy"
              }
            ],
            "limit": 50
          }
        }
      ],
      "title": "Reliability",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "mysql",
        "uid": "P430005175C4C7810"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "mappings": [],
          "noValue": "0 vulnerabilities",
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          },
          "unit": "vulnerabilities"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 5,
        "w": 8,
        "x": 7,
        "y": 1
      },
      "id": 3,
      "links": [
        {
          "targetBlank": true,
          "title": "Code Quality Issue Count",
          "url": "https://devlake.apache.org/docs/Metrics/CQIssueCount"
        }
      ],
      "options": {
        "colorMode": "value",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "auto",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "showPercentChange": false,
        "textMode": "auto",
        "wideLayout": true
      },
      "pluginVersion": "10.4.1",
      "targets": [
        {
          "dataset": "devlake_prod",
          "datasource": {
            "type": "mysql",
            "uid": "P430005175C4C7810"
          },
          "editorMode": "code",
          "format": "table",
          "rawQuery": true,
          "rawSql": "SELECT COUNT(DISTINCT i.id) AS \"Vulnerabilities\"\nFROM devlake_prod.cq_issues i\nJOIN devlake_prod.project_mapping pm ON i.project_key = pm.row_id\nWHERE pm.`table` = \"cq_projects\"\n  AND pm.project_name IN (${project_id})\n  AND i.type = \"VULNERABILITY\"\n  AND i.severity IN (\"\", \"MAJOR\", \"INFO\", \"CRITICAL\", \"MINOR\", \"BLOCKER\");",
          "refId": "A",
          "sql": {
            "columns": [
              {
                "parameters": [],
                "type": "function"
              }
            ],
            "groupBy": [
              {
                "property": {
                  "type": "string"
                },
                "type": "groupBy"
              }
            ],
            "limit": 50
          }
        }
      ],
      "title": "Security",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "mysql",
        "uid": "P430005175C4C7810"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "mappings": [],
          "noValue": "0 hotspots",
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          },
          "unit": "hotspots"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 5,
        "w": 8,
        "x": 15,
        "y": 1
      },
      "id": 4,
      "links": [
        {
          "targetBlank": true,
          "title": "Security Hotsports",
          "url": "https://devlake.apache.org/docs/Metrics/CQIssueCount/"
        }
      ],
      "options": {
        "colorMode": "value",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "auto",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "showPercentChange": false,
        "textMode": "auto",
        "wideLayout": true
      },
      "pluginVersion": "10.4.1",
      "targets": [
        {
          "dataset": "devlake_prod",
          "datasource": {
            "type": "mysql",
            "uid": "P430005175C4C7810"
          },
          "editorMode": "code",
          "format": "table",
          "rawQuery": true,
          "rawSql": "SELECT COUNT(DISTINCT i.id) AS \"hotsports\"\nFROM devlake_prod.cq_issues i\nJOIN devlake_prod.project_mapping pm ON i.project_key = pm.row_id\nWHERE pm.`table` = \"cq_projects\"\n  AND pm.project_name IN (${project_id})\n  AND i.type = \"HOTSPOTS\"\n  AND i.severity IN (\"\", \"MAJOR\", \"INFO\", \"CRITICAL\", \"MINOR\", \"BLOCKER\")\n  and i.status in (\"TO_REVIEW\", \"ACKNOWLEDGED\")\n",
          "refId": "A",
          "sql": {
            "columns": [
              {
                "parameters": [],
                "type": "function"
              }
            ],
            "groupBy": [
              {
                "property": {
                  "type": "string"
                },
                "type": "groupBy"
              }
            ],
            "limit": 50
          }
        }
      ],
      "title": "Security Hotspots",
      "type": "stat"
    },
    {
      "collapsed": false,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 6
      },
      "id": 7,
      "panels": [],
      "title": "Test & Maintainability",
      "type": "row"
    },
    {
      "datasource": {
        "type": "mysql",
        "uid": "P430005175C4C7810"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              }
            ]
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 5,
        "w": 9,
        "x": 0,
        "y": 7
      },
      "id": 6,
      "links": [
        {
          "targetBlank": true,
          "title": "Code Quality Test",
          "url": "https://devlake.apache.org/docs/Metrics/CQTest"
        }
      ],
      "options": {
        "colorMode": "value",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "horizontal",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "/.*/",
          "values": false
        },
        "showPercentChange": false,
        "textMode": "auto",
        "wideLayout": true
      },
      "pluginVersion": "10.4.1",
      "targets": [
        {
          "dataset": "devlake_prod",
          "datasource": {
            "type": "mysql",
            "uid": "P430005175C4C7810"
          },
          "editorMode": "code",
          "format": "table",
          "rawQuery": true,
          "rawSql": "SELECT CONCAT(ROUND((sum(lines_to_cover) - sum(uncovered_lines)) / sum(lines_to_cover) * 100, 1), \"% \", \"Coverage on \", ROUND(sum(lines_to_cover) / 1000, 0), \"k Lines to cover\")\n AS \"Test coverage\"\nFROM devlake_prod.cq_file_metrics i\nJOIN devlake_prod.project_mapping pm ON i.project_key = pm.row_id\nWHERE pm.`table` = \"cq_projects\"\n  AND pm.project_name IN (${project_id})\n\n\n\n\n ",
          "refId": "A",
          "sql": {
            "columns": [
              {
                "parameters": [],
                "type": "function"
              }
            ],
            "groupBy": [
              {
                "property": {
                  "type": "string"
                },
                "type": "groupBy"
              }
            ],
            "limit": 50
          }
        }
      ],
      "title": "Lines To Cover",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "mysql",
        "uid": "P430005175C4C7810"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 5,
        "w": 8,
        "x": 9,
        "y": 7
      },
      "id": 9,
      "links": [
        {
          "title": "Code Quality Maintainability-Debt",
          "url": ""
        }
      ],
      "options": {
        "colorMode": "value",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "auto",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "/.*/",
          "values": false
        },
        "showPercentChange": false,
        "textMode": "auto",
        "wideLayout": true
      },
      "pluginVersion": "10.4.1",
      "targets": [
        {
          "dataset": "devlake_prod",
          "datasource": {
            "type": "mysql",
            "uid": "P430005175C4C7810"
          },
          "editorMode": "code",
          "format": "table",
          "rawQuery": true,
          "rawSql": "SELECT concat(FLOOR(SUM(debt)/8/60), \" day(s) \", FLOOR((SUM(debt)%480)/60), \" hour(s) \") AS 'Debt'\nFROM devlake_prod.cq_issues i\nJOIN devlake_prod.project_mapping pm ON i.project_key = pm.row_id\nWHERE pm.`table` = \"cq_projects\"\n  AND pm.project_name IN (${project_id})\n  AND i.type = \"CODE_SMELL\"\n  AND i.severity IN (\"\", \"MAJOR\", \"INFO\", \"CRITICAL\", \"MINOR\", \"BLOCKER\")\n  and i.status in (\"OPEN\")\n\n\n  ",
          "refId": "A",
          "sql": {
            "columns": [
              {
                "parameters": [],
                "type": "function"
              }
            ],
            "groupBy": [
              {
                "property": {
                  "type": "string"
                },
                "type": "groupBy"
              }
            ],
            "limit": 50
          }
        }
      ],
      "title": "Maintainability - Debt",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "datasource",
        "uid": "-- Mixed --"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          },
          "unit": "code smells"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 5,
        "w": 6,
        "x": 17,
        "y": 7
      },
      "id": 12,
      "links": [
        {
          "targetBlank": true,
          "title": "Code Quality Maintainability-Debt",
          "url": "https://devlake.apache.org/docs/Metrics/CQMaintainability-Debt"
        }
      ],
      "options": {
        "colorMode": "value",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "horizontal",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "/.*/",
          "values": false
        },
        "showPercentChange": false,
        "text": {},
        "textMode": "value",
        "wideLayout": true
      },
      "pluginVersion": "10.4.1",
      "targets": [
        {
          "datasource": "mysql",
          "editorMode": "code",
          "format": "table",
          "group": [],
          "hide": false,
          "metricColumn": "none",
          "queryType": "randomWalk",
          "rawQuery": true,
          "rawSql": "SELECT\n\tCOUNT(distinct id) as 'Code Smells'\nFROM devlake_prod.cq_issues i\nJOIN devlake_prod.project_mapping pm ON i.project_key = pm.row_id\nWHERE pm.`table` = \"cq_projects\"\n  AND pm.project_name IN (${project_id})\n  and i.type = 'CODE_SMELL'\n  and i.status = \"OPEN\"",
          "refId": "A",
          "select": [
            [
              {
                "params": [
                  "blueprint_id"
                ],
                "type": "column"
              }
            ]
          ],
          "sql": {
            "columns": [
              {
                "parameters": [],
                "type": "function"
              }
            ],
            "groupBy": [
              {
                "property": {
                  "type": "string"
                },
                "type": "groupBy"
              }
            ],
            "limit": 50
          },
          "table": "_devlake_blueprint_labels",
          "timeColumn": "created_at",
          "timeColumnType": "timestamp",
          "where": [
            {
              "name": "$__timeFilter",
              "params": [],
              "type": "macro"
            }
          ]
        }
      ],
      "title": "Maintainability - Code Smells",
      "type": "stat"
    },
    {
      "collapsed": false,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 12
      },
      "id": 2,
      "panels": [],
      "title": "Duplication & Code",
      "type": "row"
    },
    {
      "datasource": {
        "type": "mysql",
        "uid": "P430005175C4C7810"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 5,
        "w": 9,
        "x": 0,
        "y": 13
      },
      "id": 10,
      "links": [
        {
          "title": "Code Quality Duplicated Blocks",
          "url": "https://devlake.apache.org/docs/Metrics/CQDuplicatedBlocks"
        }
      ],
      "options": {
        "colorMode": "value",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "auto",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "/.*/",
          "values": false
        },
        "showPercentChange": false,
        "textMode": "auto",
        "wideLayout": true
      },
      "pluginVersion": "10.4.1",
      "targets": [
        {
          "dataset": "devlake_prod",
          "datasource": {
            "type": "mysql",
            "uid": "P430005175C4C7810"
          },
          "editorMode": "code",
          "format": "table",
          "rawQuery": true,
          "rawSql": "SELECT\n  sum(duplicated_blocks)\nFROM devlake_prod.cq_file_metrics i\nJOIN devlake_prod.project_mapping pm ON i.project_key = pm.row_id\nWHERE pm.`table` = \"cq_projects\"\n  AND pm.project_name IN (${project_id})\n\n",
          "refId": "A",
          "sql": {
            "columns": [
              {
                "parameters": [],
                "type": "function"
              }
            ],
            "groupBy": [
              {
                "property": {
                  "type": "string"
                },
                "type": "groupBy"
              }
            ],
            "limit": 50
          }
        }
      ],
      "title": "Duplicated Blocks",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "mysql",
        "uid": "P430005175C4C7810"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 5,
        "w": 9,
        "x": 9,
        "y": 13
      },
      "id": 11,
      "links": [
        {
          "title": "Code Quality Duplicated Lines",
          "url": "https://devlake.apache.org/docs/Metrics/CQDuplicatedLines"
        }
      ],
      "options": {
        "colorMode": "value",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "auto",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "/.*/",
          "values": false
        },
        "showPercentChange": false,
        "textMode": "auto",
        "wideLayout": true
      },
      "pluginVersion": "10.4.1",
      "targets": [
        {
          "dataset": "devlake_prod",
          "datasource": {
            "type": "mysql",
            "uid": "P430005175C4C7810"
          },
          "editorMode": "code",
          "format": "table",
          "rawQuery": true,
          "rawSql": "SELECT CONCAT(ROUND(sum(duplicated_lines) / sum(num_of_lines) * 100, 1), '% ', 'Duplications on ', ROUND(sum(ncloc) / 1000, 0),'k Lines')\nFROM devlake_prod.cq_file_metrics i\nJOIN devlake_prod.project_mapping pm ON i.project_key = pm.row_id\nWHERE pm.`table` = \"cq_projects\"\nAND pm.project_name IN (${project_id})\n",
          "refId": "A",
          "sql": {
            "columns": [
              {
                "parameters": [],
                "type": "function"
              }
            ],
            "groupBy": [
              {
                "property": {
                  "type": "string"
                },
                "type": "groupBy"
              }
            ],
            "limit": 50
          }
        }
      ],
      "title": "Duplicated Lines",
      "type": "stat"
    }
  ],
  "schemaVersion": 39,
  "tags": [],
  "templating": {
    "list": [
      {
        "current": {
          "selected": true,
          "text": [
            "ANP"
          ],
          "value": [
            "ANP"
          ]
        },
        "datasource": {
          "type": "mysql",
          "uid": "P430005175C4C7810"
        },
        "definition": "select distinct name from projects",
        "description": "",
        "hide": 0,
        "includeAll": false,
        "label": "Teams",
        "multi": true,
        "name": "project_id",
        "options": [],
        "query": "select distinct name from projects",
        "refresh": 1,
        "regex": "",
        "skipUrlSync": false,
        "sort": 0,
        "type": "query"
      }
    ]
  },
  "time": {
    "from": "now-6h",
    "to": "now"
  },
  "timepicker": {},
  "timezone": "browser",
  "title": "Sonarqube By Teams",
  "uid": "cdmnfubonsxkwa",
  "version": 18,
  "weekStart": ""
}
